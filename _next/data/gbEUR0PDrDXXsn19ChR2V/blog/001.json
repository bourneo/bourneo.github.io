{"pageProps":{"blog":{"title":"FFmpeg 视频音频处理","date":"2023-02-28","description":"FFmpeg","tags":["FFmpeg","Tools"],"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    hr: \"hr\",\n    h2: \"h2\",\n    h3: \"h3\",\n    p: \"p\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    del: \"del\",\n    blockquote: \"blockquote\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"FFmpeg 视频音频处理\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 精要\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"简介\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"FFmpeg 中的 “FF” 指的是 “Fast Forward”，“mpeg” 则是 “Moving Picture Experts Group”。\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"命令格式\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg {全局参数} {输入文件参数} -i {输入文件} {输出文件参数} {输出文件}\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"命令参数\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            align: \"left\",\n            children: \"命令\"\n          }), _jsx(_components.th, {\n            align: \"left\",\n            children: \"简介\"\n          }), _jsx(_components.th, {\n            align: \"left\",\n            children: \"备注\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-i\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输入文件\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"input\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-f\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出格式\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"format\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c copy\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"直接复制，不经过重新编码（这样比较快）\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置视频编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -vcodec，是 -codec:v 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:a\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置音频编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -acodec，是 -codec:a 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:s\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置字幕编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -scodec，是 -codec:s 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-b:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出视频的比特率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"bit\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-b:a\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出音频的比特率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"bit\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ss\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置开始时间\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-t\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置持续时间\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"单位为秒\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-to\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置结束时间\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"创建和设置过滤图，并用它来过滤流\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf scale=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出视频的宽度和高度\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf setsar=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置过滤器输出视频的样本纵横比\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf subtitles=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置字幕\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-loop 1\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"无限循环\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-shortest\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"让生成的视频最短化\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vn\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"去除视频流\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"video not\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-an\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"去除音频流\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"audio not\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ar\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置音频码率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"audio rate\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ac\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置声道数\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"1：单声道；2：立体声；转换单声道的 TVrip 可以用 1（节省一半容量）\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-frames:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置要输出的视频帧数\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"缩写：-vframes；相当于 -filter:v\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-crf\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"质量控制\"\n          }), _jsxs(_components.td, {\n            align: \"left\",\n            children: [\"参数的设置范围是 0\", _jsx(_components.del, {\n              children: \"50，数值越小代表清晰度越高，建议值域为 18\"\n            }), \"28。\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"备注：\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"关于 crf 的值：\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"量化器标度的范围是 0-51：其中 0 是无损，23 是默认值，51 是最坏的。较低的值表示较高的质量，主观上合理的范围是 18-28。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"将 18 视为视觉无损或接近无损：它应该与输入看起来相同或几乎相同，但在技术上并非无损。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"范围是指数级的，因此增加 CRF 值 +6 大约是比特率的一半，而 -6 大约是比特率的两倍。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"一般用法是选择仍能提供可接受质量的最高 CRF 值。如果输出看起来不错，则尝试更高的值，如果看起来很差，则选择较低的值。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——截取操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"视频截取\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ss 00:02:25 -to 00:05:34 -c copy output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ss 00:02:25 -t 00:02:00 -c copy output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"FFmpeg 截视频默认采用关键帧，所以输出的时间和设置的时间，可能有若干秒的误差。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"音频截取\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp3 -ss 00:02:24.5 -to 00:05:38 -c copy output-1.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp3 -ss 00:02:24.5 -t 00:02:00 -c copy output-2.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——提取操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"从视频提取音频\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 mp3 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec libmp3lame output-1.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -f mp3 -vn output-2.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 output-3.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -f mp3 -ar 16000 output-4.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 m4a 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec copy -vn output-1.m4a\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 aac 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec copy -vn output-1.aac\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 wav 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ac 1 -ar 16000 -f wav output-1.wav\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec pcm_s16le -f s16le -ac 1 -ar 16000 -f wav output-2.wav\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频提取的某一帧\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -ss 00:00:01 -frames:v 1 output-1.png\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"如果时间戳不靠前，提取速度会比较慢。这时直接用 PotPlayer 的图像截取会更快。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频提取封面\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -map 0:v -map -0:V -c copy output-1.png\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"如果报错信息是：Output file #0 does not contain any stream，说明视频未附有封面。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"没封面的视频，在文件浏览器看到的，只是解码器读到的关键帧缩略图。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——添加操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加硬字幕\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -vf subtitles=input-1.ass -c:a copy output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"直接复制音频可以防止音频被压缩。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加软字幕\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -i input-1.ass -c copy -c:s mov_text output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加封面\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -i input-1.png -map 0 -map 1 -c copy -c:v:1 png -disposition:v:1 attached_pic output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——转码操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"dvd / iso 直接转 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.iso -preset superfast -vf yadif -crf 18 output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"vob 格式转 mkv\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.vob -preset superfast -crf 18 -c:a ac3 -c:s copy -map 0:1 -map 0:2 output-1.mkv\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"-c:a 是 -codec:a 的简写，冒号后面的 a 是 audio 音频的简写，s 是 subtitle 的简写。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"这个参数用来指定视频、音频、字幕所采用的编码器，copy 表示沿用源视频的编码器。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"0:0 是 DVD 的菜单，0:1 是视频部分，0:2 和 0:3 是音频部分，0:4 和 0:5 是字幕。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"vob 格式转 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 2000，推荐\\r\\nffmpeg -i input-1.vob -preset superfast -crf 18 -c:a copy -map 0:1 -map 0:2 output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1500，速度太慢\\r\\nffmpeg -i input-1.vob -c:v libx264 -crf 18 -vf yadif -c:a ac3 -b:a 448k output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1000\\r\\nffmpeg -i output-1.vob -c:a copy -codec:v libx264 output-3.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1000\\r\\nffmpeg -i input-1.vob -c:a aac -aq 100 -c:v libx264 -c:s mov_text -map 0:1 -map 0:2 -movflags +faststart -vb 1000k -maxrate 1500k -bufsize 500k output-4.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 800\\r\\nffmpeg -i input-1.vob output-5.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 500\\r\\nffmpeg -i input-1.vob -preset superfast -crf 28 -c:a ac3 output-6.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 400\\r\\nffmpeg -i input-1.vob -vcodec mpeg4 -b:a 1200k -mbd 2 -flags +mv4 -trellis 2 -cmp 2 -subcmp 2 -metadata title=output output-7.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 300，分辨率改变\\r\\nffmpeg -i input-1.vob -vcodec libx265 output-8.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——合并操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"无损合并 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐（数量少的话）\\r\\n(echo file &#39;input-1.mp4&#39; &amp; echo file &#39;input-2.mp4&#39;)&gt;input-1.txt\\r\\nffmpeg -safe 0 -f concat -i input-1.txt -c copy output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 转成 ts 再合并\\r\\nffmpeg -i input-1.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 1.ts\\r\\nffmpeg -i input-2.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 2.ts\\r\\nffmpeg -i &quot;concat:1.ts|2.ts&quot; -c copy output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 批量合并文件夹下的 mp4\\r\\n(for %i in (*.mp4) do @echo file &#39;%i&#39;) &gt; list.txt\\r\\nffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 批量合并文件夹下的 mp4，包含隐藏文件\\r\\nfor /f &quot;delims=&quot; %a in (&#39;dir /b/a-d *.mp4&#39;) do (echo file &#39;%cd%\\\\%a&#39; &gt;&gt; list.txt)\\r\\nffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"音频和图片合并，转成视频\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -loop 1 -i input-1.jpg -i input-1.mp3 -c:v libx264 -c:a aac -b:a 330k -vf scale=1080:1080 -shortest output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 如果是无损音频格式，例如 flac，可以封装进 mkv 里\\r\\n// 同样的画质，libx265 压制的视频体积更小，但对机器性能要高点，介意的可以选 libx264\\r\\nffmpeg -loop 1 -i hr-1.png -i Beyond.flac -c:v libx265 -c:a copy -shortest output.mkv\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 图片转成不带视音频的视频\\r\\nffmpeg -loop 1 -i hr-1.png -c:v libx265 -t 292 output2.mkv\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——图片压缩\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"图片转码压缩\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input.png output.jpg\\r\\nffmpeg -i input.png output.jpeg\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input.png output.webp\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input.png output.bmp\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"图片压缩\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input.png -vf palettegen=max_colors=256:stats_mode=single -y tmp.png\\r\\nffmpeg -i input.png -i tmp.png -lavfi &quot;[0][1:v] paletteuse&quot; -pix_fmt pal8 -y output.png\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.p, {\n      children: \"参考链接：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://ffmpeg.org/ffmpeg.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"FFmpeg 官方英文文档\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://www.cnblogs.com/vicowong/archive/2011/03/08/1977088.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"FFmpeg 命令详解\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://it.ismy.fun/2019/05/16/convert-vob-to-mp4-by-ffmpeg/\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"ffmpeg - 把光盘转换成 MP4\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://www.cnblogs.com/toumingbai/p/8298289.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"使用 FFMPEG 压缩 png 图片 与 tinypng 压缩结果对比\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {})]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}}},"__N_SSG":true}