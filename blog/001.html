<!DOCTYPE html><html lang="en" class="dark:bg-gray-400"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>FFmpeg 视频音频处理 - Blog</title><meta name="author" content="DoveRank"/><meta name="keywords" content="FFmpeg,Tools"/><meta name="description" content="FFmpeg"/><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/6cc44b8b372cf7ad.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6cc44b8b372cf7ad.css" data-n-g=""/><link rel="preload" href="/_next/static/css/274d78babdec4bc3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/274d78babdec4bc3.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-3b5a00d5d7e8d93b.js" defer=""></script><script src="/_next/static/chunks/main-bc1a515a011ad0f9.js" defer=""></script><script src="/_next/static/chunks/pages/_app-deb7dea34d407f94.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-07e56e4e720d62c6.js" defer=""></script><script src="/_next/static/gbEUR0PDrDXXsn19ChR2V/_buildManifest.js" defer=""></script><script src="/_next/static/gbEUR0PDrDXXsn19ChR2V/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="h-screen"><header class="py-4 border-b bg-slate-500 text-gray-200"><div class="max-w-5xl mx-auto px-4 flex items-center justify-between relative"><a class="flex items-center" href="/"><img alt="Avatar" src="/img/output_96.png" width="38" height="38" decoding="async" data-nimg="1" class="rounded-lg" loading="lazy" style="color:transparent"/><p class="ml-2 font-bold text-xl ">DoveRank</p></a><nav class="hidden md:flex items-center tracking-wider"><a class="flex items-center hover:opacity-60 after:content-[&#x27;|&#x27;] after:mx-3 after:text-gray-300 after:text-sm last:after:hidden" href="/"><img alt="Home" src="/icon/Home.svg" width="20" height="20" decoding="async" data-nimg="1" class="rounded-lg mr-2" loading="lazy" style="color:transparent"/>Home</a><a class="flex items-center hover:opacity-60 after:content-[&#x27;|&#x27;] after:mx-3 after:text-gray-300 after:text-sm last:after:hidden" href="/blog"><img alt="Blog" src="/icon/Blog.svg" width="20" height="20" decoding="async" data-nimg="1" class="rounded-lg mr-2" loading="lazy" style="color:transparent"/>Blog</a><a class="flex items-center hover:opacity-60 after:content-[&#x27;|&#x27;] after:mx-3 after:text-gray-300 after:text-sm last:after:hidden" href="/flow"><img alt="Flow" src="/icon/Flow.svg" width="20" height="20" decoding="async" data-nimg="1" class="rounded-lg mr-2" loading="lazy" style="color:transparent"/>Flow</a><a class="flex items-center hover:opacity-60 after:content-[&#x27;|&#x27;] after:mx-3 after:text-gray-300 after:text-sm last:after:hidden" href="/tags"><img alt="Tags" src="/icon/Tags.svg" width="20" height="20" decoding="async" data-nimg="1" class="rounded-lg mr-2" loading="lazy" style="color:transparent"/>Tags</a><a class="flex items-center hover:opacity-60 after:content-[&#x27;|&#x27;] after:mx-3 after:text-gray-300 after:text-sm last:after:hidden" href="/about"><img alt="About" src="/icon/About.svg" width="20" height="20" decoding="async" data-nimg="1" class="rounded-lg mr-2" loading="lazy" style="color:transparent"/>About</a></nav><button class="visible md:hidden w-5 h-5 relative"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-5 h-5 absolute top-0 left-0 transition duration-150 opacity-100 scale-100 data-[hidden=true]:invisible data-[hidden=true]:opacity-0 data-[hidden=true]:scale-0" data-hidden="false"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" class="w-5 h-5 absolute top-0 left-0 transition duration-150 opacity-100 scale-100 data-[hidden=true]:invisible data-[hidden=true]:opacity-0 data-[hidden=true]:scale-0" data-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></header><div class="min-h-84%"><div class="mt-6 max-w-3xl mx-auto "><section class="max-w-3xl mx-auto px-6 border-b"><div class="flex flex-col items-center justify-center pt-6 pb-12 "><span class="mt-2 text-sm">update: <!-- -->2023-02-28</span></div></section><article class="px-4 py-8 prose max-w-none "><h1>FFmpeg 视频音频处理</h1>
<hr/>
<h2>FFmpeg 精要</h2>
<hr/>
<h3>简介</h3>
<p>FFmpeg 中的 “FF” 指的是 “Fast Forward”，“mpeg” 则是 “Moving Picture Experts Group”。</p>
<h3>命令格式</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg {全局参数} {输入文件参数} -i {输入文件} {输出文件参数} {输出文件}</code></pre></div>
<h3>命令参数</h3>
<table><thead><tr><th align="left">命令</th><th align="left">简介</th><th align="left">备注</th></tr></thead><tbody><tr><td align="left">-i</td><td align="left">设置输入文件</td><td align="left">input</td></tr><tr><td align="left">-f</td><td align="left">设置输出格式</td><td align="left">format</td></tr><tr><td align="left">-c copy</td><td align="left">直接复制，不经过重新编码（这样比较快）</td><td align="left"></td></tr><tr><td align="left">-c:v</td><td align="left">设置视频编码器</td><td align="left">相当于 -vcodec，是 -codec:v 的简写</td></tr><tr><td align="left">-c:a</td><td align="left">设置音频编码器</td><td align="left">相当于 -acodec，是 -codec:a 的简写</td></tr><tr><td align="left">-c:s</td><td align="left">设置字幕编码器</td><td align="left">相当于 -scodec，是 -codec:s 的简写</td></tr><tr><td align="left">-b:v</td><td align="left">设置输出视频的比特率</td><td align="left">bit</td></tr><tr><td align="left">-b:a</td><td align="left">设置输出音频的比特率</td><td align="left">bit</td></tr><tr><td align="left">-ss</td><td align="left">设置开始时间</td><td align="left"></td></tr><tr><td align="left">-t</td><td align="left">设置持续时间</td><td align="left">单位为秒</td></tr><tr><td align="left">-to</td><td align="left">设置结束时间</td><td align="left"></td></tr><tr><td align="left">-vf</td><td align="left">创建和设置过滤图，并用它来过滤流</td><td align="left"></td></tr><tr><td align="left">-vf scale=</td><td align="left">设置输出视频的宽度和高度</td><td align="left"></td></tr><tr><td align="left">-vf setsar=</td><td align="left">设置过滤器输出视频的样本纵横比</td><td align="left"></td></tr><tr><td align="left">-vf subtitles=</td><td align="left">设置字幕</td><td align="left"></td></tr><tr><td align="left">-loop 1</td><td align="left">无限循环</td><td align="left"></td></tr><tr><td align="left">-shortest</td><td align="left">让生成的视频最短化</td><td align="left"></td></tr><tr><td align="left">-vn</td><td align="left">去除视频流</td><td align="left">video not</td></tr><tr><td align="left">-an</td><td align="left">去除音频流</td><td align="left">audio not</td></tr><tr><td align="left">-ar</td><td align="left">设置音频码率</td><td align="left">audio rate</td></tr><tr><td align="left">-ac</td><td align="left">设置声道数</td><td align="left">1：单声道；2：立体声；转换单声道的 TVrip 可以用 1（节省一半容量）</td></tr><tr><td align="left">-frames:v</td><td align="left">设置要输出的视频帧数</td><td align="left">缩写：-vframes；相当于 -filter:v</td></tr><tr><td align="left">-crf</td><td align="left">质量控制</td><td align="left">参数的设置范围是 0<del>50，数值越小代表清晰度越高，建议值域为 18</del>28。</td></tr></tbody></table>
<p>备注：</p>
<blockquote>
<p>关于 crf 的值：</p>
<p>量化器标度的范围是 0-51：其中 0 是无损，23 是默认值，51 是最坏的。较低的值表示较高的质量，主观上合理的范围是 18-28。</p>
<p>将 18 视为视觉无损或接近无损：它应该与输入看起来相同或几乎相同，但在技术上并非无损。</p>
<p>范围是指数级的，因此增加 CRF 值 +6 大约是比特率的一半，而 -6 大约是比特率的两倍。</p>
<p>一般用法是选择仍能提供可接受质量的最高 CRF 值。如果输出看起来不错，则尝试更高的值，如果看起来很差，则选择较低的值。</p>
</blockquote>
<hr/>
<h2>FFmpeg 使用实例——截取操作</h2>
<hr/>
<h3>视频截取</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -ss 00:02:25 -to 00:05:34 -c copy output-1.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -ss 00:02:25 -t 00:02:00 -c copy output-2.mp4</code></pre></div>
<blockquote>
<p>FFmpeg 截视频默认采用关键帧，所以输出的时间和设置的时间，可能有若干秒的误差。</p>
</blockquote>
<h3>音频截取</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp3 -ss 00:02:24.5 -to 00:05:38 -c copy output-1.mp3</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp3 -ss 00:02:24.5 -t 00:02:00 -c copy output-2.mp3</code></pre></div>
<hr/>
<h2>FFmpeg 使用实例——提取操作</h2>
<hr/>
<h3>从视频提取音频</h3>
<p>提取 mp3 格式：</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -acodec libmp3lame output-1.mp3</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -f mp3 -vn output-2.mp3</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 output-3.mp3</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -f mp3 -ar 16000 output-4.mp3</code></pre></div>
<p>提取 m4a 格式：</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -acodec copy -vn output-1.m4a</code></pre></div>
<p>提取 aac 格式：</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -acodec copy -vn output-1.aac</code></pre></div>
<p>提取 wav 格式：</p>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -ac 1 -ar 16000 -f wav output-1.wav</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.mp4 -acodec pcm_s16le -f s16le -ac 1 -ar 16000 -f wav output-2.wav</code></pre></div>
<h3>视频提取的某一帧</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 -ss 00:00:01 -frames:v 1 output-1.png</code></pre></div>
<blockquote>
<p>如果时间戳不靠前，提取速度会比较慢。这时直接用 PotPlayer 的图像截取会更快。</p>
</blockquote>
<h3>视频提取封面</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 -map 0:v -map -0:V -c copy output-1.png</code></pre></div>
<blockquote>
<p>如果报错信息是：Output file #0 does not contain any stream，说明视频未附有封面。</p>
<p>没封面的视频，在文件浏览器看到的，只是解码器读到的关键帧缩略图。</p>
</blockquote>
<hr/>
<h2>FFmpeg 使用实例——添加操作</h2>
<hr/>
<h3>视频加硬字幕</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 -vf subtitles=input-1.ass -c:a copy output-1.mp4</code></pre></div>
<blockquote>
<p>直接复制音频可以防止音频被压缩。</p>
</blockquote>
<h3>视频加软字幕</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 -i input-1.ass -c copy -c:s mov_text output-1.mp4</code></pre></div>
<h3>视频加封面</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input-1.mp4 -i input-1.png -map 0 -map 1 -c copy -c:v:1 png -disposition:v:1 attached_pic output-1.mp4</code></pre></div>
<hr/>
<h2>FFmpeg 使用实例——转码操作</h2>
<hr/>
<h3>dvd / iso 直接转 mp4</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.iso -preset superfast -vf yadif -crf 18 output-1.mp4</code></pre></div>
<h3>vob 格式转 mkv</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input-1.vob -preset superfast -crf 18 -c:a ac3 -c:s copy -map 0:1 -map 0:2 output-1.mkv</code></pre></div>
<blockquote>
<p>-c:a 是 -codec:a 的简写，冒号后面的 a 是 audio 音频的简写，s 是 subtitle 的简写。</p>
<p>这个参数用来指定视频、音频、字幕所采用的编码器，copy 表示沿用源视频的编码器。</p>
<p>0:0 是 DVD 的菜单，0:1 是视频部分，0:2 和 0:3 是音频部分，0:4 和 0:5 是字幕。</p>
</blockquote>
<h3>vob 格式转 mp4</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 2000，推荐
ffmpeg -i input-1.vob -preset superfast -crf 18 -c:a copy -map 0:1 -map 0:2 output-1.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 1500，速度太慢
ffmpeg -i input-1.vob -c:v libx264 -crf 18 -vf yadif -c:a ac3 -b:a 448k output-2.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 1000
ffmpeg -i output-1.vob -c:a copy -codec:v libx264 output-3.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 1000
ffmpeg -i input-1.vob -c:a aac -aq 100 -c:v libx264 -c:s mov_text -map 0:1 -map 0:2 -movflags +faststart -vb 1000k -maxrate 1500k -bufsize 500k output-4.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 800
ffmpeg -i input-1.vob output-5.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 500
ffmpeg -i input-1.vob -preset superfast -crf 28 -c:a ac3 output-6.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 400
ffmpeg -i input-1.vob -vcodec mpeg4 -b:a 1200k -mbd 2 -flags +mv4 -trellis 2 -cmp 2 -subcmp 2 -metadata title=output output-7.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 码率 300，分辨率改变
ffmpeg -i input-1.vob -vcodec libx265 output-8.mp4</code></pre></div>
<hr/>
<hr/>
<h2>FFmpeg 使用实例——合并操作</h2>
<hr/>
<h3>无损合并 mp4</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐（数量少的话）
(echo file &amp;#39;input-1.mp4&amp;#39; &amp;amp; echo file &amp;#39;input-2.mp4&amp;#39;)&amp;gt;input-1.txt
ffmpeg -safe 0 -f concat -i input-1.txt -c copy output-2.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 转成 ts 再合并
ffmpeg -i input-1.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 1.ts
ffmpeg -i input-2.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 2.ts
ffmpeg -i &amp;quot;concat:1.ts|2.ts&amp;quot; -c copy output.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 批量合并文件夹下的 mp4
(for %i in (*.mp4) do @echo file &amp;#39;%i&amp;#39;) &amp;gt; list.txt
ffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 批量合并文件夹下的 mp4，包含隐藏文件
for /f &amp;quot;delims=&amp;quot; %a in (&amp;#39;dir /b/a-d *.mp4&amp;#39;) do (echo file &amp;#39;%cd%\%a&amp;#39; &amp;gt;&amp;gt; list.txt)
ffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4</code></pre></div>
<h3>音频和图片合并，转成视频</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -loop 1 -i input-1.jpg -i input-1.mp3 -c:v libx264 -c:a aac -b:a 330k -vf scale=1080:1080 -shortest output-1.mp4</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 如果是无损音频格式，例如 flac，可以封装进 mkv 里
// 同样的画质，libx265 压制的视频体积更小，但对机器性能要高点，介意的可以选 libx264
ffmpeg -loop 1 -i hr-1.png -i Beyond.flac -c:v libx265 -c:a copy -shortest output.mkv</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 图片转成不带视音频的视频
ffmpeg -loop 1 -i hr-1.png -c:v libx265 -t 292 output2.mkv</code></pre></div>
<hr/>
<h2>FFmpeg 使用实例——图片压缩</h2>
<hr/>
<h3>图片转码压缩</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input.png output.jpg
ffmpeg -i input.png output.jpeg</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input.png output.webp</code></pre></div>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">ffmpeg -i input.png output.bmp</code></pre></div>
<h3>图片压缩</h3>
<div class="remark-highlight"><pre class="language-unknown"><code class="language-unknown">// 推荐
ffmpeg -i input.png -vf palettegen=max_colors=256:stats_mode=single -y tmp.png
ffmpeg -i input.png -i tmp.png -lavfi &amp;quot;[0][1:v] paletteuse&amp;quot; -pix_fmt pal8 -y output.png</code></pre></div>
<h3></h3>
<hr/>
<hr/>
<p>参考链接：</p>
<ul>
<li><a href="https://ffmpeg.org/ffmpeg.html" target="_blank" rel="nofollow noopener noreferrer">FFmpeg 官方英文文档</a></li>
<li><a href="https://www.cnblogs.com/vicowong/archive/2011/03/08/1977088.html" target="_blank" rel="nofollow noopener noreferrer">FFmpeg 命令详解</a></li>
<li><a href="https://it.ismy.fun/2019/05/16/convert-vob-to-mp4-by-ffmpeg/" target="_blank" rel="nofollow noopener noreferrer">ffmpeg - 把光盘转换成 MP4</a></li>
<li><a href="https://www.cnblogs.com/toumingbai/p/8298289.html" target="_blank" rel="nofollow noopener noreferrer">使用 FFMPEG 压缩 png 图片 与 tinypng 压缩结果对比</a></li>
<li><a href=""></a></li>
</ul>
<hr/></article></div></div><footer class="border-t bg-slate-600 text-gray-200"><div class="max-w-3xl mx-auto px-4 py-4 "><div class="space-y-1 sm:space-y-0 text-sm "><div class="justify-center flex"><p>Copyright © 2023 DoveRank</p></div></div><div class="mt-4 space-y-1 sm:space-y-0 text-sm "><div class="justify-center flex"><div>We may use cookies to enhance your experience.</div></div><div class="justify-center flex"><div>By continuing to visit this site you agree to our use of cookies.</div></div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"blog":{"title":"FFmpeg 视频音频处理","date":"2023-02-28","description":"FFmpeg","tags":["FFmpeg","Tools"],"content":{"compiledSource":"/*@jsxRuntime automatic @jsxImportSource react*/\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    hr: \"hr\",\n    h2: \"h2\",\n    h3: \"h3\",\n    p: \"p\",\n    div: \"div\",\n    pre: \"pre\",\n    code: \"code\",\n    table: \"table\",\n    thead: \"thead\",\n    tr: \"tr\",\n    th: \"th\",\n    tbody: \"tbody\",\n    td: \"td\",\n    del: \"del\",\n    blockquote: \"blockquote\",\n    ul: \"ul\",\n    li: \"li\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h1, {\n      children: \"FFmpeg 视频音频处理\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 精要\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"简介\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"FFmpeg 中的 “FF” 指的是 “Fast Forward”，“mpeg” 则是 “Moving Picture Experts Group”。\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"命令格式\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg {全局参数} {输入文件参数} -i {输入文件} {输出文件参数} {输出文件}\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"命令参数\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            align: \"left\",\n            children: \"命令\"\n          }), _jsx(_components.th, {\n            align: \"left\",\n            children: \"简介\"\n          }), _jsx(_components.th, {\n            align: \"left\",\n            children: \"备注\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-i\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输入文件\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"input\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-f\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出格式\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"format\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c copy\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"直接复制，不经过重新编码（这样比较快）\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置视频编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -vcodec，是 -codec:v 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:a\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置音频编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -acodec，是 -codec:a 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-c:s\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置字幕编码器\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"相当于 -scodec，是 -codec:s 的简写\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-b:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出视频的比特率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"bit\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-b:a\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出音频的比特率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"bit\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ss\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置开始时间\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-t\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置持续时间\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"单位为秒\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-to\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置结束时间\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"创建和设置过滤图，并用它来过滤流\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf scale=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置输出视频的宽度和高度\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf setsar=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置过滤器输出视频的样本纵横比\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vf subtitles=\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置字幕\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-loop 1\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"无限循环\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-shortest\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"让生成的视频最短化\"\n          }), _jsx(_components.td, {\n            align: \"left\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-vn\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"去除视频流\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"video not\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-an\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"去除音频流\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"audio not\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ar\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置音频码率\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"audio rate\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-ac\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置声道数\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"1：单声道；2：立体声；转换单声道的 TVrip 可以用 1（节省一半容量）\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-frames:v\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"设置要输出的视频帧数\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"缩写：-vframes；相当于 -filter:v\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            align: \"left\",\n            children: \"-crf\"\n          }), _jsx(_components.td, {\n            align: \"left\",\n            children: \"质量控制\"\n          }), _jsxs(_components.td, {\n            align: \"left\",\n            children: [\"参数的设置范围是 0\", _jsx(_components.del, {\n              children: \"50，数值越小代表清晰度越高，建议值域为 18\"\n            }), \"28。\"]\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"备注：\"\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"关于 crf 的值：\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"量化器标度的范围是 0-51：其中 0 是无损，23 是默认值，51 是最坏的。较低的值表示较高的质量，主观上合理的范围是 18-28。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"将 18 视为视觉无损或接近无损：它应该与输入看起来相同或几乎相同，但在技术上并非无损。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"范围是指数级的，因此增加 CRF 值 +6 大约是比特率的一半，而 -6 大约是比特率的两倍。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"一般用法是选择仍能提供可接受质量的最高 CRF 值。如果输出看起来不错，则尝试更高的值，如果看起来很差，则选择较低的值。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——截取操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"视频截取\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ss 00:02:25 -to 00:05:34 -c copy output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ss 00:02:25 -t 00:02:00 -c copy output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"FFmpeg 截视频默认采用关键帧，所以输出的时间和设置的时间，可能有若干秒的误差。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"音频截取\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp3 -ss 00:02:24.5 -to 00:05:38 -c copy output-1.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp3 -ss 00:02:24.5 -t 00:02:00 -c copy output-2.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——提取操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"从视频提取音频\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 mp3 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec libmp3lame output-1.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -f mp3 -vn output-2.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 output-3.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -f mp3 -ar 16000 output-4.mp3\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 m4a 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec copy -vn output-1.m4a\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 aac 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec copy -vn output-1.aac\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"提取 wav 格式：\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -ac 1 -ar 16000 -f wav output-1.wav\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.mp4 -acodec pcm_s16le -f s16le -ac 1 -ar 16000 -f wav output-2.wav\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频提取的某一帧\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -ss 00:00:01 -frames:v 1 output-1.png\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"如果时间戳不靠前，提取速度会比较慢。这时直接用 PotPlayer 的图像截取会更快。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频提取封面\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -map 0:v -map -0:V -c copy output-1.png\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"如果报错信息是：Output file #0 does not contain any stream，说明视频未附有封面。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"没封面的视频，在文件浏览器看到的，只是解码器读到的关键帧缩略图。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——添加操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加硬字幕\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -vf subtitles=input-1.ass -c:a copy output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"直接复制音频可以防止音频被压缩。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加软字幕\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -i input-1.ass -c copy -c:s mov_text output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"视频加封面\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input-1.mp4 -i input-1.png -map 0 -map 1 -c copy -c:v:1 png -disposition:v:1 attached_pic output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——转码操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"dvd / iso 直接转 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.iso -preset superfast -vf yadif -crf 18 output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"vob 格式转 mkv\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input-1.vob -preset superfast -crf 18 -c:a ac3 -c:s copy -map 0:1 -map 0:2 output-1.mkv\"\n        })\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"-c:a 是 -codec:a 的简写，冒号后面的 a 是 audio 音频的简写，s 是 subtitle 的简写。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"这个参数用来指定视频、音频、字幕所采用的编码器，copy 表示沿用源视频的编码器。\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"0:0 是 DVD 的菜单，0:1 是视频部分，0:2 和 0:3 是音频部分，0:4 和 0:5 是字幕。\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"vob 格式转 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 2000，推荐\\r\\nffmpeg -i input-1.vob -preset superfast -crf 18 -c:a copy -map 0:1 -map 0:2 output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1500，速度太慢\\r\\nffmpeg -i input-1.vob -c:v libx264 -crf 18 -vf yadif -c:a ac3 -b:a 448k output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1000\\r\\nffmpeg -i output-1.vob -c:a copy -codec:v libx264 output-3.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 1000\\r\\nffmpeg -i input-1.vob -c:a aac -aq 100 -c:v libx264 -c:s mov_text -map 0:1 -map 0:2 -movflags +faststart -vb 1000k -maxrate 1500k -bufsize 500k output-4.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 800\\r\\nffmpeg -i input-1.vob output-5.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 500\\r\\nffmpeg -i input-1.vob -preset superfast -crf 28 -c:a ac3 output-6.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 400\\r\\nffmpeg -i input-1.vob -vcodec mpeg4 -b:a 1200k -mbd 2 -flags +mv4 -trellis 2 -cmp 2 -subcmp 2 -metadata title=output output-7.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 码率 300，分辨率改变\\r\\nffmpeg -i input-1.vob -vcodec libx265 output-8.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——合并操作\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"无损合并 mp4\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐（数量少的话）\\r\\n(echo file \u0026#39;input-1.mp4\u0026#39; \u0026amp; echo file \u0026#39;input-2.mp4\u0026#39;)\u0026gt;input-1.txt\\r\\nffmpeg -safe 0 -f concat -i input-1.txt -c copy output-2.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 转成 ts 再合并\\r\\nffmpeg -i input-1.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 1.ts\\r\\nffmpeg -i input-2.mp4 -vcodec copy -acodec copy -vbsf h264_mp4toannexb 2.ts\\r\\nffmpeg -i \u0026quot;concat:1.ts|2.ts\u0026quot; -c copy output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 批量合并文件夹下的 mp4\\r\\n(for %i in (*.mp4) do @echo file \u0026#39;%i\u0026#39;) \u0026gt; list.txt\\r\\nffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 批量合并文件夹下的 mp4，包含隐藏文件\\r\\nfor /f \u0026quot;delims=\u0026quot; %a in (\u0026#39;dir /b/a-d *.mp4\u0026#39;) do (echo file \u0026#39;%cd%\\\\%a\u0026#39; \u0026gt;\u0026gt; list.txt)\\r\\nffmpeg -f concat -safe 0 -i list.txt -c copy -y output.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"音频和图片合并，转成视频\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -loop 1 -i input-1.jpg -i input-1.mp3 -c:v libx264 -c:a aac -b:a 330k -vf scale=1080:1080 -shortest output-1.mp4\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 如果是无损音频格式，例如 flac，可以封装进 mkv 里\\r\\n// 同样的画质，libx265 压制的视频体积更小，但对机器性能要高点，介意的可以选 libx264\\r\\nffmpeg -loop 1 -i hr-1.png -i Beyond.flac -c:v libx265 -c:a copy -shortest output.mkv\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 图片转成不带视音频的视频\\r\\nffmpeg -loop 1 -i hr-1.png -c:v libx265 -t 292 output2.mkv\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h2, {\n      children: \"FFmpeg 使用实例——图片压缩\"\n    }), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.h3, {\n      children: \"图片转码压缩\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input.png output.jpg\\r\\nffmpeg -i input.png output.jpeg\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input.png output.webp\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"ffmpeg -i input.png output.bmp\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"图片压缩\"\n    }), \"\\n\", _jsx(_components.div, {\n      className: \"remark-highlight\",\n      children: _jsx(_components.pre, {\n        className: \"language-unknown\",\n        children: _jsx(_components.code, {\n          className: \"language-unknown\",\n          children: \"// 推荐\\r\\nffmpeg -i input.png -vf palettegen=max_colors=256:stats_mode=single -y tmp.png\\r\\nffmpeg -i input.png -i tmp.png -lavfi \u0026quot;[0][1:v] paletteuse\u0026quot; -pix_fmt pal8 -y output.png\"\n        })\n      })\n    }), \"\\n\", _jsx(_components.h3, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.hr, {}), \"\\n\", _jsx(_components.p, {\n      children: \"参考链接：\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://ffmpeg.org/ffmpeg.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"FFmpeg 官方英文文档\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://www.cnblogs.com/vicowong/archive/2011/03/08/1977088.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"FFmpeg 命令详解\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://it.ismy.fun/2019/05/16/convert-vob-to-mp4-by-ffmpeg/\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"ffmpeg - 把光盘转换成 MP4\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"https://www.cnblogs.com/toumingbai/p/8298289.html\",\n          target: \"_blank\",\n          rel: \"nofollow noopener noreferrer\",\n          children: \"使用 FFMPEG 压缩 png 图片 与 tinypng 压缩结果对比\"\n        })\n      }), \"\\n\", _jsx(_components.li, {\n        children: _jsx(_components.a, {\n          href: \"\"\n        })\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.hr, {})]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? _jsx(MDXLayout, Object.assign({}, props, {\n    children: _jsx(_createMdxContent, props)\n  })) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n","frontmatter":{},"scope":{}}}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"001"},"buildId":"gbEUR0PDrDXXsn19ChR2V","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>